/*
 suggest.js common swg_ab v1.0.0
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-09-28 10:56:58
 suggest - swg.js common swg_ab v1.0.0
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-09-28 10:56:58
 suggest - cnavi.js common swg_ab v1.0.0
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-09-28 10:56:58
 suggest - asuraku.js common v1.0.0
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-09-28 10:56:58
*/
(function(){if("undefined"!==typeof jQuery){var f=jQuery.noConflict(),g;window.searchplat||(searchplat={});searchplat.suggest||(searchplat.suggest={});g=searchplat.suggest;var a=function(){};a.prototype={pluginArray:[],add:function(e){this.pluginArray.push(e)},invokeFunction:function(e,a,b){for(var c=0,d=this.pluginArray.length;c<d;c++){var f=this.pluginArray[c];"function"===typeof f[a]&&f[a].call(f,e,b)}},init:function(e){for(var a=0,b=this.pluginArray.length;a<b;a++){var c=this.pluginArray[a];if("function"===
typeof c.init&&!c.init(e))return!1}return!0},createSuggestElems:function(e){for(var a="",b,c=0,d=this.pluginArray.length;c<d;c++)b=this.pluginArray[c],"function"===typeof b.createSuggestElems&&(a+=b.createSuggestElems(e));return a},getSelectedText:function(e,a){for(var b=0,c=this.pluginArray.length;b<c;b++){var d=this.pluginArray[b];if("function"===typeof d.getSelectedText&&(d=d.getSelectedText(e,a)))return d}return f(a).text()},addSubmitLog:function(e){for(var a="",b=0,c=this.pluginArray.length;b<
c;b++){var d=this.pluginArray[b];"function"===typeof d.addSubmitLog&&(a+=d.addSubmitLog(e))}return a}};var b=g.plugins=new a,c=g.modules=[],d=function(){g.rsuggest=this};d.prototype={resultCache:{},backup:"",lastInput:"",respInput:null,formatType:"osgenre",sggstSelectNum:-1,usingChar:"",mouseInput:null,mouseState:0,mouseMove:0,mouseOver:0,enterFlag:1,keyCode:null,currentFontSize:null,maxIndex:0,index:-1,clickEnableFlag:1,IeVersion:0,viewEvent:null,showTimer:null,waitTimeout:null,suggestDivPos:f("body"),
onoff:1,onoffInitFlag:0,onElem:null,offElem:null,decisionFlag:0,scVal:0,submitWay:0,spaceRegExp:RegExp("^[\\s"+unescape(String.fromCharCode("0x3000"))+unescape(String.fromCharCode("0x00A0"))+"]+"),whitespaceMatcher:RegExp("[\\s"+unescape(String.fromCharCode("0x3000"))+unescape(String.fromCharCode("0x00A0"))+"]+"),blackList:["iphone","ipod","ipad","android"],onOffBlackList:[],count:10,configCollection:"col",cssRow:"sggstRow",cssSelect:"sggstSelect",cssNoSelect:"sggstNoselect",cssKeyword:"sggstKeyword",
cssOnoff:"sggstOnoff",cssOffImage:"sggstHideimg",cssOnImage:"sggstOpenimg",cssRemarks:"sggstComment",cssRemarksBox:"sggstCommentbox",cssComment:"sggstBetabtn01",cssOff:"sggstBetabtn02",cssOn:"openSuggest",searchCommand:"suggest",submitLogCommand:"submit",cookieCommand:"conf",paramInput:"q",paramCollection:"cl",paramSuggestid:"sid",paramSuggestUse:"su",paramSelectNum:"sn",paramSuggestOnOff:"so",paramFormParam:"fp",paramReqid:"rid",sggstReqid:Math.floor(1E10*Math.random()),paramEncoding:"oe",paramSelect:"ss",
paramGroupId:"gi",paramCookieMethod:"mt",paramCookieCheck:"c",paramCookieAdd:"a",paramCookieDelete:"d",paramSubmitWay:"sw",paramCallback:"cb",paramExParam:"ex",ajaxSearchTimeout:1E4,ajaxSubmitLogTimeout:3E3,afterWaitingforEventTimeout:100,justAddedToQueueTimeout:10,pollingTime:10,retryCount:20,isTimeout:!1,readyState:0,browser:{},init:function(e){var a=this,e=a.config=f(e),c=g.hook;if(!a.validateConfig(e))return!1;a.form=f("#"+e.attr("form"));a.baseUrl=e.attr("baseUrl");a.button=f("#"+e.attr("button"));
a.suggestId=e.attr("suggestId");a.encoding=e.attr("encoding");a.groupId=e.attr("groupId");a.input=f("#"+e.attr("input"));a.input.attr("autocomplete","off");a.sendFormParam=a.checkBoolNum(e.attr("sendFormParam"))||1;a.onoffEnable=a.checkBoolNum(e.attr("onoff"))||1;a.hookRequired=a.checkBoolNum(e.attr("hookRequired"))||0;a.keywordReplaceOnMouseover=a.checkBoolNum(e.attr("keywordReplaceOnMouseover"))||0;a.addBlackList=e.attr("uaBlackList")||"";a.byteNumToHideOpenSggst=e.attr("byteNumToHideOpenSggst")||
36;a.nowFontSize=f("html").css("font-size");a.hideToolTips=e.attr("hideToolTips")||"";a.openToolTips=e.attr("openToolTips")||"";a.pollingTime=e.attr("pollingTime")||a.pollingTime;a.retryCount=e.attr("retryCount")||a.retryCount;a.asurakuOff=e.attr("asurakuOff")||1;a.getBrowser(navigator.userAgent);if(!a.preInit()||-1==a.judge()||1!=a.input.parent(".sggstInputWrap").length||1==a.hookRequired&&"undefined"===typeof c){try{a.initFailure()}catch(h){}return!1}a.setPluginModules(e);"undefined"!==typeof c&&
void 0!=c.prototype&&f.extend(d.prototype,c.prototype);if(!b.init(a))return a.initFailure(),!1;a.createSuggestDiv();a.onoffReady();a.resize();f(window).resize(function(){a.resize()});a.input.keydown(function(e){a.enterFlag=0;a.keyCode=e.keyCode;switch(e.keyCode){case 40:a.down();break;case 38:a.up();break;case 9:a.hide()}}).keypress(function(e){a.keyCode=e.keyCode;a.enterFlag=1;switch(e.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&
(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.buttonClick(e)},10),a.eventStop()),!1}}).keyup(function(e){switch(e.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.buttonClick(e)},10),a.eventStop()),!1}}).focus(function(){a.lastInput=a.input.val();0==a.mouseOver&&(a.backup=a.input.val());a.eventStart()}).blur(function(){0==
a.mouseState&&0==a.mouseOver?a.eventStop():(1==a.mouseState||1==a.mouseOver)&&a.input.focus();a.mouseState=0}).mouseover(function(){1==a.keywordReplaceOnMouseover&&(a.suggest.is(":visible")&&-1!=a.index&&0!=a.backup.length&&a.lastInput==a.input.val())&&(a.input.val(a.backup),a.sggstSelectNum=-1,a.usingChar="")}).attr("maxlength",2048);document.activeElement.id==a.input.attr("id")&&(a.input.blur(),a.input.focus());b.invokeFunction(a,"postInit");a.postInit();return!0},preInit:function(){return!0},postInit:function(){return!0},
setPluginModules:function(a){for(var j=0,d=c.length;j<d;j++){var h=c[j];"undefined"!=typeof h.pluginName&&"undefined"==typeof a.attr(h.pluginName+"Off")&&b.add(new h)}},validateConfig:function(a){if(void 0==a||!this.isMatch(a.attr("input"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("form"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("baseUrl"),/(^https?:\/\/|^\/\/).+$/)||!this.isMatch(a.attr("button"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("suggestId"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("encoding"),
/^(utf-8|euc-jp)$/)||!this.isMatch(a.attr("col"),/^[a-z]+$/)||!this.isMatch(a.attr("groupId"),/^[a-zA-Z0-9_\-]+$/))return!1;var b=a.attr("byteNumToHideOpenSggst");return b&&!this.isInRange(b,1,99)||(b=a.attr("openToolTips"))&&!this.isMatch(b,/^[^<>]+$/)||(b=a.attr("hideToolTips"))&&!this.isMatch(b,/^[^<>]+$/)||(b=a.attr("uaBlackList"))&&!this.isMatch(b,/^[a-zA-Z0-9 _\/\.;]+$/)||(b=a.attr("pollingTime"))&&!this.isInRange(b,10,1E3)||(b=a.attr("retryCount"))&&!this.isInRange(b,1,100)||(b=a.attr("onoff"))&&
!this.isInRange(b,0,1)||(b=a.attr("hookRequired"))&&!this.isInRange(b,0,1)||(b=a.attr("sendFormParam"))&&!this.isInRange(b,0,1)?!1:(a=a.attr("keywordReplaceOnMouseover"))&&!this.isInRange(a,0,1)?!1:!0},checkBoolNum:function(a){return"undefined"!=typeof a&&0!=a.length&&(0==a||1==a)?a:""},escapeHtml:function(a){return f("<div/>").text(a).html()},initFailure:function(){this.input.attr("autocomplete","")},createSuggestDiv:function(){var a=this;a.suggest=f("<div>").attr({id:"suggest"}).show().hide().appendTo(a.suggestDivPos);
var c=b.createSuggestElems(this);a.suggest.append(c);a.suggest.delegate("."+a.cssKeyword,"mouseup",function(c){var j=f(this),d=j.text();1!=c.which||(a.mouseInput!=d||0==a.clickEnableFlag)||(a.mouseState=2,a.input.blur(),j=b.getSelectedText(a,j.parent("."+a.cssRow)),a.input.val(j),a.sggstSelectNum=a.index,a.usingChar=d,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.buttonClick(c)},10),a.eventStop())});a.suggest.delegate("."+a.cssKeyword,"mousedown",function(b){if(1!=b.which)a.input.blur();
else return a.mouseInput=f(this).text(),a.mouseState=1,!1});a.suggest.delegate("."+a.cssKeyword,"mouseover",function(){a.over(f(this))});a.suggest.delegate("."+a.cssKeyword,"mouseout",function(){f(this).parent().removeClass(a.cssSelect).addClass(a.cssNoSelect);a.mouseState=0});a.suggest.delegate("."+a.cssKeyword,"mousemove",function(){a.mouseMove=1});a.remarks=f('<div class="'+a.cssRemarks+'"><div class="'+a.cssRemarksBox+'"><div class="'+a.cssComment+'">')},buttonClick:function(a){b.invokeFunction(this,
"preButtonClick",a);this.button.click()},preSearch:function(){return!0},search:function(){var a=this,c=a.input.val(),d;a.preSearch()&&0!=a.onoffInitFlag&&(!c||a.isMatch(c,a.spaceRegExp)?(a.usingChar="",a.sggstSelectNum=-1,a.hide()):c!=a.lastInput&&(a.resize(),a.lastInput=c,a.backup=c,a.readyState=0,clearTimeout(a.waitTimeout),clearInterval(a.showTimer),clearTimeout(d),d=setTimeout(function(){a.index=-1;a.mouseMove=0;a.maxIndex=0;b.invokeFunction(a,"search");a.waitTimeout=setTimeout(function(){clearInterval(a.showTimer)},
a.pollingTime*a.retryCount);clearInterval(a.showTimer);a.showTimer=setInterval(function(){2>a.readyState||(a.suggest.append(a.remarks),clearTimeout(a.waitTimeout),clearInterval(a.showTimer),3>a.readyState?setTimeout(function(){a.showInternal()},a.pollingTime):a.showInternal())},a.pollingTime)},a.justAddedToQueueTimeout),a.postSearch()))},showInternal:function(){this.mouseMove=1;var a=this.suggest.children().not(this.remarks).filter(function(){return"none"!==f(this).css("display")});1==this.onoff&&
0<a.size()?this.suggest.show():this.suggest.hide()},showAfterGetSuggest:function(a){b.invokeFunction(this,"showWithSuggestKeyword",a)},postSearch:function(){},read:function(a,b,c){var d=this,l=setTimeout(function(){d.isTimeout=!0;"function"===typeof c&&c()},d.ajaxSearchTimeout);d.isTimeout=!1;try{f.ajax({url:a,cache:!0,timeout:d.ajaxSearchTimeout,dataType:"jsonp",scriptCharset:d.encoding,jsonp:d.paramCallback,success:function(a){clearTimeout(l);d.isTimeout||b(a)}})}catch(i){clearTimeout(d.waitTimeout),
clearInterval(d.showTimer),"function"===typeof c&&c()}},eventStart:function(){var a=this;clearInterval(a.viewEvent);a.clickEnableFlag=!0;a.decisionFlag=!1;a.viewEvent=setInterval(function(){a.nowFontSize=f("html").css("font-size");a.currentFontSize!=a.nowFontSize&&(a.currentFontSize=a.nowFontSize,a.resize());a.controlOnElem();a.search()},100)},eventStop:function(){var a=this;clearInterval(this.viewEvent);setTimeout(function(){a.hide()},200)},hide:function(a){a&&0!=this.lastInput.length&&
(this.input.val(this.backup),this.sggstSelectNum=-1,this.usingChar="");this.lastInput=this.input.val();this.suggest.hide()},select:function(a){var c=this.suggest.children("."+this.cssSelect+", ."+this.cssNoSelect);c.filter("."+this.cssSelect).removeClass(this.cssSelect).addClass(this.cssNoSelect);c=c.filter(":visible").eq(this.index);-1!=this.index&&c.removeClass(this.cssNoSelect).addClass(this.cssSelect);a&&(a="",-1>=this.index||this.index>=this.maxIndex?(a=this.backup,this.usingChar="",this.sggstSelectNum=
-1):(this.usingChar=a=b.getSelectedText(this,c),this.sggstSelectNum=this.index),this.input.val(a),this.lastInput=a)},up:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(-1>=this.index&&(this.index=this.maxIndex),this.suggest.is(":visible")?(this.index--,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},down:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||
(this.index>=this.maxIndex&&(this.index=-1),this.suggest.is(":visible")?(this.index++,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},over:function(a){var b=this,c=-1,d=b.suggest.children("."+b.cssSelect+", ."+b.cssNoSelect);d.filter("."+b.cssSelect).removeClass(b.cssSelect).addClass(b.cssNoSelect);d.filter(":visible").each(function(d,h){if(a.get(0)==f(h).find("."+b.cssKeyword).get(0))return c=d,!1});if(d=1==b.keywordReplaceOnMouseover&&1==b.mouseMove)b.mouseOver=
1,b.input.blur(),b.input.focus();b.index=c;b.select(d);setTimeout(function(){b.mouseOver=0},50)},preJump:function(){return!0},jump:function(a){this.preJump()&&(this.scVal=1==this.decisionFlag?a:0)},sendSubmitLog:function(a){var c=this.config.attr(this.configCollection);if(0!=c.length){var d=this.input.val().replace(this.spaceRegExp,""),a=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramCollection+"="+c+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSuggestOnOff+
"="+this.onoff+"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+encodeURIComponent(this.usingChar)+"&"+this.paramSuggestUse+"="+a+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(d),a=a+b.addSubmitLog(this);1==this.sendFormParam&&(a+="&"+this.paramFormParam+"="+encodeURIComponent(this.form.serialize()));try{var h=this.encoding;this.config.attr(this.configCollection);var l;l=this.browser.msie?"jsonp":"json";setTimeout(function(){return!0},
this.ajaxSubmitLogTimeout);f.ajax({url:a,cache:!0,timeout:this.ajaxSubmitLogTimeout,async:!1,dataType:l,scriptCharset:h,jsonp:this.paramCallback,success:function(){}})}catch(i){}}},isUse:function(){return 0!=this.usingChar.length&&0==this.usingChar.indexOf(this.input.val())?1:0},judge:function(){for(var a=this,b=navigator.userAgent.toLowerCase(),c=0;c<a.blackList.length;c++){var d=a.blackList[c];if(0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(b)))return-1}if(0!=a.addBlackList.length)for(var f=a.addBlackList.split(","),
c=0;c<f.length;c++)if(d=f[c],0!=d.length&&-1!=b.indexOf(d))return-1;a.browser.msie&&(a=this,c=a.browser.version,5<c&&7>c?a.IeVersion=6:6<c&&8>c&&(a.IeVersion=7));6==a.IeVersion&&(a.onoffEnable=0);for(c=0;c<a.onOffBlackList.length;c++)if(d=a.onOffBlackList[c],0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(b))){a.onoffEnable=0;break}return a.IeVersion},getBrowser:function(a){var b={};a&&(a=a.toLowerCase(),a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||
/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],a[1]&&(b[a[1]]=!0,b.version=a[2]||"0"),b.chrome&&"undefined"===typeof window.chrome?b.webkit=!0:b.chrome&&"undefined"!==typeof window.chrome?b.blink=!0:b.webkit&&(b.safari=!0));this.browser=b},preResize:function(){return!0},resize:function(){if(this.preResize()){var a=this.getTextPos(),b;7==this.IeVersion&&(a=this.getIe7TextPos(a));b=a.top;var a=a.left,c=
Math.ceil(this.input.outerHeight());this.suggest.css({top:b+c,left:a});this.changeSuggestWidth();this.postResize()}},postResize:function(){},getTextPos:function(){return this.input.position()},getIe7TextPos:function(a){var b=[],c=document.body,d=c.getBoundingClientRect(),f=(d.right-d.left)/c.offsetWidth;b.top=Math.ceil(a.top/((d.bottom-d.top)/c.offsetHeight));b.left=Math.ceil(a.left/f);return b},changeSuggestWidth:function(){var a=this.input.outerWidth(),b=this.input.innerWidth(),c=0,d=c=0;try{c=
parseInt(this.suggest.css("border-left-width")),d=parseInt(this.suggest.css("border-right-width"))}catch(f){}c+=d;d=this.suggest.outerWidth()-c;a!=d&&(this.suggest.css({width:a-c}),this.suggest.find("."+this.cssKeyword).css({width:b-c}))},onoffReady:function(){1==this.onoffEnable?(this.createOnElm(),this.createOffElm(),this.checkCookie()):this.setInitOnoffNum(1)},checkCookie:function(){var a=this;f.ajax({type:"GET",url:a.baseUrl+"/"+a.cookieCommand+"?"+a.paramGroupId+"="+a.groupId+"&"+a.paramCookieMethod+
"="+a.paramCookieCheck,dataType:"jsonp",timeout:500,jsonp:a.paramCallback,success:function(b){b=b.result;if("undefined"!=typeof b&&(0==b||1==b))a.setInitOnoffNum(0==b?1:0)}});setTimeout(function(){a.setInitOnoffNum(1)},1E3)},setInitOnoffNum:function(a){1!=this.onoffInitFlag&&(this.onoff=a,this.onoffInitFlag=1,this.displayOnoff())},createOnElm:function(){var a=this;a.onElem=f("<div />").hide().attr({"class":a.cssOn,title:a.openToolTips}).click(function(){a.setOnoffNum(1);a.input.focus();setTimeout(function(){a.lastInput=
""},120)});a.input.after(a.onElem)},createOffElm:function(){var a=this;a.offElem=f("<div />").attr({"class":a.cssOff,title:a.hideToolTips}).append(f("<span />").attr("class",a.cssOffImage));a.remarks.children().append(a.offElem);a.suggest.delegate("."+a.cssOff,"mousedown",function(b){if(1!=b.which)a.input.blur();else return a.mouseState=1,a.setOnoffNum(0),a.input.blur(),!1});a.suggest.delegate("."+a.cssOff,"mouseout",function(){a.mouseState=0})},setOnoffNum:function(a){this.onoff=a;this.setCookie(a);
this.displayOnoff()},setCookie:function(a){f.ajax({type:"GET",url:this.baseUrl+"/"+this.cookieCommand+"?"+this.paramGroupId+"="+this.groupId+"&"+this.paramCookieMethod+"="+(1==a?this.paramCookieDelete:this.paramCookieAdd),dataType:"jsonp",timeout:500,jsonp:this.paramCallback,success:function(){}})},displayOnoff:function(){1==this.onoffEnable&&(1==this.onoff?(this.onElem.hide(),this.resize(),this.input.attr("autocomplete","off")):(this.resize(),this.input.attr("autocomplete",""),this.controlOnElem(),
this.suggest.hide()))},controlOnElem:function(){1!=this.onoffEnable||(0!=this.onoff||0==this.byteNumToHideOpenSggst)||(1==this.isByteLengthOver(this.input.val(),this.byteNumToHideOpenSggst)?this.onElem.hide():this.onElem.is(":visible")||this.onElem.show())},isSuggestUse:function(){return"undefined"!=typeof this.scVal&&1==this.scVal},isMatch:function(a,b){return a&&RegExp(b).test(a)?!0:!1},isInRange:function(a,b,c){a=parseInt(a);return!isNaN(a)&&a>=b&&a<=c},isNotEmptyArray:function(a){return"object"===
typeof a&&"function"===typeof a.pop&&0<a.length},createWordLine:function(a){if(!a||this.isMatch(a,this.spaceRegExp))return"";for(var a=this.escapeHtml(a),b=this.respInput.toLowerCase().split(this.whitespaceMatcher),c,d=0,f=b.length;d<f;d++)c=this.escapeHtml(b[d]),a=a.replace(RegExp("(^|\\s)("+this.escapeRegExp(c)+")"),"$1<strong>$2</strong>");return a},escapeRegExp:function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},isByteLengthOver:function(a,b){if(void 0===a)return 0;var c=0,d="",
f=a.length,i;for(i=0;i<f;i++)if(d=escape(a.charAt(i)),c+=4>d.length&&!/%[0|1|8-9|A-F]\w|%7F/.test(d)?1:2,c>b)return 1;return 0},setExParamToUrlMap:function(a,b){if(0!=b.length){var c=b.split("&");f.each(c,function(b,c){var d=c.split("=");a[d[0]]=2==d.length?d[1]:""})}return a}};f(function(){(new d).init("#sggstConfig")})}})();
(function(){if("undefined"!=typeof jQuery){var f=jQuery.noConflict();if(!("undefined"==typeof searchplat||"undefined"==typeof searchplat.suggest||"undefined"==typeof searchplat.suggest.plugins)){var g=function(){};g.prototype={cssRow:"swgRow",cssSwgTopRow:"swgTopRow",cssBasicTopRow:"basicTopRow",cssBasicBorder:"sggstBorder",cssSwgBorder:"swgBorder",cssSwgRow:"swgWordRow",cssAllGenreRow:"swgAgRow",cssCurrentGenreRow:"swgCgRow",formatType:"osgenre",cssSwgTopWordRow:"swgTopWordRow",paramGenre:"ge",paramGenreUse:"gu",
paramOutputFormat:"of",paramSortLogic:"sl",maxRows:10,maxAddGenreRows:1,maxEachGenreRows:3,noGenreId:"0",genreName:"",swgQuery:"swg",swgOutput:"osgenre",gbQuery:"",gbOutput:"osgenre",swgPos:"bottom",allGenrePhrase:"",genreBoostOutput:"osgenre",swgExistsCss:"sggstSwg",basicExistsCss:"sggstBasic",searchTypeBasic:"basic_",searchTypeSwg:"swg_",paramExParam:"ex",defaultGenreId:"",defaultGenrePhrase:"",validateConfig:function(a){var b=a.config;if(void 0==b)return!1;var c=b.attr("selectBoxId");return c&&
!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("maxRows"))&&!a.isInRange(c,0,30)||(c=b.attr("maxAddGenreRows"))&&!a.isInRange(c,0,10)||(c=b.attr("maxEachGenreRows"))&&!a.isInRange(c,0,10)||(c=b.attr("noGenreId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("swgQuery"))&&!a.isMatch(c,/^[^<>]+$/)||(c=b.attr("swgOutput"))&&!a.isMatch(c,/^[^<>]+$/)||(c=b.attr("genreBoostQuery"))&&!a.isMatch(c,/^[^<>]+$/)||(c=b.attr("genreBoostOutput"))&&!a.isMatch(c,/^[^<>]+$/)||(c=b.attr("exParam"))&&!a.isMatch(c,/^[^<>]+$/)?
!1:(b=b.attr("defaultGenreId"))&&!a.isMatch(b,/^[a-zA-Z0-9_\-]+$/)?!1:!0},init:function(a){var b=this,c=a.config;b.genreSelectBox=f([{value:b.noGenreId,isDummy:!0}]);if(!b.validateConfig(a))return!1;a.maxRows=c.attr("maxRows")||b.maxRows;b.maxAddGenreRows=c.attr("maxAddGenreRows")||b.maxAddGenreRows;b.maxEachGenreRows=c.attr("maxEachGenreRows")||b.maxEachGenreRows;b.swgQuery=c.attr("swgQuery")||b.swgQuery;b.swgOutput=c.attr("swgOutput")||b.swgOutput;b.gbQuery=c.attr("genreBoostQuery")||b.gbQuery;
b.gbOutput=c.attr("genreBoostOutput")||b.genreBoostOutput;b.exParam=c.attr("exParam")||"";b.swgPos=c.attr("swgPos")||b.swgPos;b.allGenrePhrase=c.attr("allGenrePhrase")||b.allGenrePhrase;b.defaultGenreId=c.attr("defaultGenreId")||b.defaultGenreId;b.defaultGenrePhrase=c.attr("defaultGenrePhrase")||b.defaultGenrePhrase;var d=c.attr("selectboxId");b.noGenreId=c.attr("noGenreId")||"0";"undefined"!=typeof d&&0<d.length&&(b.genreSelectBox=f("#"+d));if("undefined"==typeof b.genreSelectBox.val()||!b.genreSelectBox.attr("isDummy")&&
0==b.genreSelectBox.find("option[value="+b.noGenreId+"]").length)return a.config=f(),!1;a.form.bind("reset",function(){setTimeout(function(){b.genreSelectBox.val(b.noGenreId)},a.afterWaitingforEventTimeout)});a.formatType=b.formatType;b.genreSelectBox.getAddingQuery=function(a,c){a[b.paramOutputFormat]=b.swgOutput;if(this.val()==b.noGenreId)a[b.paramSortLogic]=b.swgQuery;else if(b.gbQuery&&c===b.searchTypeBasic){var d=this.val(),e=this.get(0);b.defaultGenreId&&(b.defaultGenrePhrase&&"undefined"!==
typeof e.options&&0<e.options.length&&b.defaultGenrePhrase==e.options[e.selectedIndex].text)&&(d=b.defaultGenreId);a[b.paramGenre]=d;a[b.paramSortLogic]=b.gbQuery}else a[b.paramSortLogic]=b.swgQuery;return a};b.genreSelectBox.change(function(){a.respInput=""});var e=b.genreSelectBox.attr("name")||"g";b.genreSelectBox.setGenreId=function(a){var c=b.getSelectedSwg(a).genreId,h=b.getSelectedSwg(a).swgIndex,g=d+"_hidden_for_suggest";a.form.children("#"+g).length&&a.form.children("#"+g).remove();a.swgIndex=
0;0<c.length&&(b.genreHidden=f("<input />").attr("id",g).attr("name",e).attr("type","hidden").val(c),b.genreHidden.appendTo(a.form),a.swgIndex=h,this.isDummy||f(this).removeAttr("name"))};0==f("body[onunload]").length&&f(window).bind("unload",function(){});a.getTextPos=function(){return this.input.offset()};a.button.bind("click.swg",function(){try{a.sendSubmitLog(a.isUse())}catch(b){}return!0});return!0},preButtonClick:function(a){try{this.genreSelectBox.setGenreId(a),a.jump(a.isUse())}catch(b){}},
createSuggestElems:function(a){var b='<span class="'+a.cssKeyword+'"></span></div>',c='<div class="'+a.cssNoSelect+" "+a.cssRow+'">'+b,b='<div class="'+a.cssNoSelect+" "+this.cssRow+'">'+b,d="",e="",a=isNaN(parseInt(a.maxRows))?0:parseInt(a.maxRows),f=isNaN(parseInt(this.maxAddGenreRows))?0:parseInt(this.maxAddGenreRows),m=isNaN(parseInt(this.maxEachGenreRows))?0:parseInt(this.maxEachGenreRows),f=f*m;0<f&&(f+=2);for(m=0;m<a;m++)d+=c;d+='<hr class="'+this.cssBasicBorder+'">';if(0<f){for(m=0;m<f;m++)e+=
b;e+='<hr class="'+this.cssSwgBorder+'">'}if("bottom"===this.swgPos)return d+e;if("top"===this.swgPos)return e+d},postInit:function(a){var b=this;a.suggest.find("."+b.cssRow+" > ."+a.cssKeyword).bind("mouseup",function(c){c.stopPropagation();var d=f(this),e=d.text();1!=c.which||(a.mouseInput!=e||0==a.clickEnableFlag)||(a.over(d),a.mouseState=2,a.input.blur(),a.input.val(b.getSelectText(d)),a.sggstSelectNum=a.index,a.usingChar=e,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.buttonClick(c)},
a.justAddedToQueueTimeout),a.eventStop())})},getValidIntValue:function(a,b,c,d){a=isNaN(a)||0==a.length?b:parseInt(a);return a<c?c:a>d?d:a},getSelectText:function(a){a=a.clone();a.children("span").remove();return a.text()},getSelectedSwg:function(a){var b=this,c=0,d=0,e={genreId:"",swgIndex:0};a.suggest.children(":visible").filter("."+b.cssRow).each(function(){var j=f(this).children("."+a.cssKeyword).children("span[key]");!j.hasClass(b.cssAllGenreRow)&&!j.hasClass(b.cssCurrentGenreRow)&&d++;if(!f(this).hasClass(a.cssNoSelect))return c=
j.hasClass(b.cssAllGenreRow)?"all":j.hasClass(b.cssCurrentGenreRow)?"c":d,swgGenreId=0===j.length?"":j.attr("key"),e.genreId=swgGenreId,e.swgIndex=c,!1});return e},search:function(a){var b=this,c=a.lastInput.replace(a.spaceRegExp,"");if(0==c.length)a.readyState+=2;else{var d=a.config.attr(a.configCollection),e=b.searchTypeBasic+d+b.genreSelectBox.val(),d=b.searchTypeSwg+d+b.noGenreId;"undefined"==typeof a.resultCache[e]&&(a.resultCache[e]={});"undefined"==typeof a.resultCache[d]&&(a.resultCache[d]=
{});var e=a.resultCache[e],d=a.resultCache[d],f={};if("undefined"==typeof e[c])try{var m=b.createRequestUrl(a,c,b.searchTypeBasic);a.read(m,function(a){a.inputWord=c;f.basic=a;b.genreSelectBox.val()==b.noGenreId&&(f.swg=a)},function(){f.basic={};b.genreSelectBox.val()==b.noGenreId&&(f.swg={})})}catch(h){a.readyState+=2}else f.basic=e[c];if("undefined"==typeof d[c]&&b.genreSelectBox.val()!==b.noGenreId)try{m=b.createRequestUrl(a,c,b.searchTypeSwg),a.read(m,function(a){a.inputWord=c;f.swg=a},function(){f.swg=
{}})}catch(g){a.readyState+=2}else f.swg=d[c];var i=setInterval(function(){"undefined"!==typeof f.basic&&"undefined"!==typeof f.swg&&(clearInterval(i),b.show(a,f))},20)}},createRequestUrl:function(a,b,c){var d={},e=a.config.attr(a.configCollection);d[a.paramCollection]=e;d[a.paramSuggestid]=a.suggestId;d[a.paramEncoding]=a.encoding;var d=this.genreSelectBox.getAddingQuery(d,c),d=a.setExParamToUrlMap(d,this.exParam),j="";f.each(d,function(a,b){j+="&"+a+"="+b});return a.baseUrl+"/"+a.searchCommand+
"?"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramInput+"="+encodeURIComponent(b)+j},show:function(a,b){var c=this,d=f.extend(!0,[],b.basic),e=f.extend(!0,[],b.swg);if(a.isNotEmptyArray(d)||a.isNotEmptyArray(e)){var j=a.isNotEmptyArray(d)?d[1]:{},g=a.isNotEmptyArray(e)?e[1]:{};a.isNotEmptyArray(d);swgDescriptions=a.isNotEmptyArray(e)?e[2]:{};if(j||g){a.suggest.children("."+a.cssRow+", ."+c.cssRow).hide();a.suggest.removeClass(c.basicExistsCss);a.suggest.removeClass(c.swgExistsCss);a.showAfterGetSuggest(d);
var h=d.inputWord,h=h?h:a.lastInput,l=a.config.attr(a.configCollection),i=c.searchTypeBasic+l+c.genreSelectBox.val(),l=c.searchTypeSwg+l+c.noGenreId;"undefined"==typeof a.resultCache[i][h]&&(a.resultCache[i][h]=d);"undefined"==typeof a.resultCache[l][h]&&(a.resultCache[l][h]=e);a.respInput=a.lastInput;for(var d=swgDescriptions[0],v=swgDescriptions[1],q=[],t="",r=-1,n=0,p=0,u=0,s=0,e=0,h=d.length;e<h;e++)if(0<d[e].length){r=e;q=d[e];break}d=a.suggest.children("."+a.cssRow);d.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);
var w=!1,x=!1;d.each(function(b,d){var e=f(d),g=j[b],h=a.createWordLine(g);if("undefined"===typeof g)return!1;if("top"===c.swgPos){if(!x&&0<=r&&(x=!0),!w)return t=g,w=!0}else w||(t=g,w=!0);e.show().children("."+a.cssKeyword).html(h);n++});selectedGenreText=c.genreSelectBox==c.noGenreId?"":f("#"+c.genreSelectBox.attr("id")+" option:selected").text();d=a.suggest.children("."+c.cssRow);limitSwg=c.maxEachGenreRows*c.maxAddGenreRows;0!=c.maxEachGenreRows&&d.each(function(b,d){if(!(limitSwg<=b)){var e=
f(d);if(0>=q.length&&("top"===c.swgPos||c.genreSelectBox.val()!=c.noGenreId))return 0<n&&""!==t?(k=a.createWordLine(t),k+='<span key="'+c.noGenreId+'" class="'+c.cssSwgRow+" "+c.cssAllGenreRow+'">'+c.allGenrePhrase+"</span>",e.show().children("."+a.cssKeyword).html(k),s++):0==n&&0<g.length&&(k=a.createWordLine(g[1<r?r:0]),k+='<span key="'+c.noGenreId+'" class="'+c.cssSwgRow+" "+c.cssAllGenreRow+'">'+c.allGenrePhrase+"</span>",e.show().children("."+a.cssKeyword).html(k),s++),!1;var h=g[r],i=q[p%c.maxEachGenreRows],
l=v[i],k=a.createWordLine(h);if("undefined"!=typeof h&&!a.isMatch(h,a.spaceRegExp)&&"undefined"!=typeof i&&"undefined"!=typeof l){if("top"===c.swgPos)if(0<j.length&&0==u&&c.genreSelectBox.val()!=c.noGenreId&&selectedGenreText)k=a.createWordLine(t),k+='<span key="'+c.genreSelectBox.val()+'" class="'+c.cssSwgRow+" "+c.cssCurrentGenreRow+'">'+selectedGenreText+"</span>",u++,limitSwg++;else if(0==s)k+='<span key="'+c.noGenreId+'" class="'+c.cssSwgRow+" "+c.cssAllGenreRow+'">'+c.allGenrePhrase+"</span>",
s++,limitSwg++;else if(i!=c.genreSelectBox.val())k+='<span key="'+i+'" class="'+c.cssSwgRow+'">'+l+"</span>",p++;else return!0;else if(0==s&&c.genreSelectBox.val()!=c.noGenreId&&selectedGenreText)k+='<span key="'+c.noGenreId+'" class="'+c.cssSwgRow+" "+c.cssAllGenreRow+'">'+c.allGenrePhrase+"</span>",s++,limitSwg++;else if(i!=c.genreSelectBox.val())k+='<span key="'+i+'" class="'+c.cssSwgRow+'">'+l+"</span>",p++;else return!0;e.show().children("."+a.cssKeyword).html(k);return!0}}});0<n&&a.suggest.addClass(c.basicExistsCss);
(0<p||0<s)&&a.suggest.addClass(c.swgExistsCss);a.maxIndex+=n+s+u+p}}a.readyState+=2},addSubmitLog:function(){var a,b="&"+this.paramGenre+"="+this.genreSelectBox.val();a="undefined"==typeof this.genreHidden?this.noGenreId:this.genreHidden.val();b+="&"+this.paramGenreUse+"="+a;0!=this.exParam.length&&(b+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));return b},getSelectedText:function(a,b){var c=f(b);return c.hasClass(this.cssRow)||c.hasClass(this.cssSwgTopRow)?(c=c.children("."+a.cssKeyword).clone(),
c.children("span").remove(),c.text()):null}};g=new g;searchplat.suggest.plugins.add(g)}}})();
(function(){if("undefined"!=typeof jQuery){var f=jQuery.noConflict();if(!("undefined"===typeof searchplat||"undefined"===typeof searchplat.suggest||"undefined"===typeof searchplat.suggest.plugins)){var g=function(){};g.pluginName="cnavi";g.prototype={cnaviCache:null,destinationStartMark:"<em>",destinationEndMark:"</em>",destinationRegExp:/<em>(.*)<\/em>/,cssEmphasize:"cnaviEm",cssRow:"cnaviRow",cssImg:"cnaviImg",cssLink:"cnaviLink",rowCount:1,searchCount:2,searchCommand:"cnavi",paramCNaviUse:"cu",
paramSearchCount:"h",paramLanguage:"lr",cnaviCollectionKey:"cnavicol",lang:"ja",cnaviCollection:null,selectboxId:null,noGenreId:"0",genreSelectBox:null,ignoreUrls:[],partsname:"suggestcn1",channel:null,func:"Suggest",parts:null,cnaviExistsCss:"sggstCn",paramExParam:"exc",validateConfig:function(a){var b=a.config;if(void 0==b||!a.isMatch(b.attr("channel"),/^[a-zA-Z0-9_\-]+$/)||!a.isMatch(b.attr("parts"),/^[a-zA-Z0-9_\-]+$/))return!1;var c=b.attr(this.cnaviCollectionKey);return!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||
(c=b.attr("cnaviRowCount"))&&!a.isInRange(c,0,1)||(c=b.attr("cnaviSearchCount"))&&!a.isInRange(c,0,10)||(c=b.attr("lang"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("selectboxId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("noGenreId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("ignoreUrls"))&&!a.isMatch(c,/^https?:\/\/.+$/)||(c=b.attr("partsname"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)?!1:(b=b.attr("cnaviExParam"))&&!a.isMatch(b,/^[^<>]+$/)?!1:!0},init:function(a){var b=this,c=a.config;
c.attr(a.configCollection);if(!b.validateConfig(a))return!1;b.rowCount=c.attr("cnaviRowCount")||b.rowCount;b.searchCount=c.attr("cnaviSearchCount")||b.searchCount;b.channel=c.attr("channel");b.parts=c.attr("parts");b.partsname=c.attr("partsname")||b.partsname;b.lang=c.attr("lang")||b.lang;b.cnaviCollection=c.attr(b.cnaviCollectionKey);b.cnaviCache=a.resultCache[b.cnaviCollection+b.searchCommand]={};b.selectboxId=c.attr("selectboxId")||b.selectboxId;b.selectboxId&&(b.genreSelectBox=f("#"+b.selectboxId));
b.noGenreId=c.attr("noGenreId")||b.noGenreId;var d=c.attr("ignoreUrls");d&&(b.ignoreUrls=d.split(","));b.exParam=c.attr("cnaviExParam")||"";a.input.bind("keydown.cnavi",function(c){if(13==c.keyCode&&1==a.clickEnableFlag){c=a.suggest.children("."+b.cssRow);if(!c.is("."+a.cssSelect+":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;b.cnaviSubmit(a,c,1);return!1}});return!0},createSuggestElems:function(a){for(var a='<div class="'+a.cssNoSelect+" "+this.cssRow+'"><a href="" class="'+this.cssLink+
'"><span class="'+a.cssKeyword+'"></span></a></div>',b="",c=0,d=this.rowCount;c<d;c++)b+=a;return b},postInit:function(a){var b=this,c=a.suggest.find("."+b.cssRow).find("."+b.cssLink),d=c.find("."+a.cssKeyword);c.bind("click",function(c){c.preventDefault();c=f(this).parents("."+b.cssRow).first();a.sggstSelectNum=a.index;b.cnaviSubmit(a,c,2)});d.bind("mouseup",function(a){a.stopPropagation()}).bind("mouseover",function(){a.over(f(this))}).bind("mouseout",function(){f(this).parents("."+b.cssRow).first().removeClass(a.cssSelect).addClass(a.cssNoSelect)})},
search:function(a){var b=this,c=a.lastInput.replace(a.spaceRegExp,"");if(0==c.length)a.readyState+=1;else if(a.suggest.children("."+b.cssRow).hide(),a.suggest.removeClass(b.cnaviExistsCss),"undefined"==typeof b.cnaviCache[c])try{var d=b.createRequestUrl(a,c);a.read(d,function(d){d.inputWord=c;b.show(a,d)},function(){a.readyState+=1})}catch(e){a.readyState+=1}else b.show(a,b.cnaviCache[c])},createRequestUrl:function(a,b){var c={},d=a.config.attr(this.cnaviCollectionKey);c[a.paramCollection]=d;c[a.paramSuggestid]=
a.suggestId;c[a.paramEncoding]=a.encoding;c[this.paramSearchCount]=this.searchCount;c[this.paramLanguage]=this.lang;var c=a.setExParamToUrlMap(c,this.exParam),e="";f.each(c,function(a,b){e+="&"+a+"="+b});return a.baseUrl+"/"+this.searchCommand+"?"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramInput+"="+encodeURIComponent(b)+e},show:function(a,b){var c=a.lastInput;if("object"!=typeof b[4])a.readyState+=1;else{var d=f.extend(!0,{},b[4]),e=d.destination,g=d.sentence,m=d.imageurl,d=d.queryurl;if(!a.isNotEmptyArray(e)||
!a.isNotEmptyArray(g)||!a.isNotEmptyArray(m)||!a.isNotEmptyArray(d))a.readyState+=1,this.cnaviCache[c]=b;else{"undefined"==typeof this.cnaviCache[c]&&(this.cnaviCache[c]=b);a.respInput=a.lastInput;var c=e.length,e=0,h=a.suggest.children("."+this.cssRow),l=[];h.removeClass(a.cssSelect).addClass(a.cssNoSelect);var i=0;a:for(;i<c&&!(e>=this.rowCount);i++){var v=h.eq(e),q=g[i],t=m[i],r=d[i],n="",p;if(a.isMatch(q,/^[^\s]+/)&&a.isMatch(r,/^https?:\/\/.+$/)&&(q.match(this.destinationRegExp),p=a.escapeHtml(RegExp.$1),
-1==f.inArray(p,l)&&(l.push(p),q=q.replace(this.destinationStartMark,""),q=q.replace(this.destinationEndMark,""),!(-1<location.href.indexOf(r))))){if(this.genreSelectBox&&this.genreSelectBox.val()!=this.noGenreId)for(var u=0,s=this.ignoreUrls.length;u<s;u++)if(-1<r.indexOf(this.ignoreUrls[u]))continue a;v.find("a."+this.cssLink).attr("href",r);a.isMatch(t,/^[a-zA-Z0-9\/:\._\-]+$/)&&(n+='<img src="'+t+'" class="'+this.cssImg+'" />');n+=a.escapeHtml(q);-1<n.indexOf(p)&&(n=n.replace(p,'<span class="'+
this.cssEmphasize+'">'+p+"</span>"));v.show().find("."+a.cssKeyword).html(n);a.suggest.addClass(this.cnaviExistsCss);e++}}a.maxIndex+=e;a.readyState+=1}}},getSelectedText:function(a,b){return f(b).hasClass(this.cssRow)?a.backup:null},cnaviSubmit:function(a,b,c){var d=b.find("."+this.cssLink).attr("href");this.isCNaviUsed=!0;a.submitWay=c;a.usingChar=b.find("."+this.cssEmphasize).text();try{"function"===typeof s_partsCounter&&s_partsCounter(this.partsname),"function"===typeof ontrackingidAjax&&(1==
c?ontrackingidAjax(this.channel,this.func,this.parts,"Enter"):2==c&&ontrackingidAjax(this.channel,this.func,this.parts,"Click"))}catch(e){}this.cnaviCollection&&(a.configCollection=this.cnaviCollectionKey);a.jump(1);a.sendSubmitLog(1);setTimeout(function(){window.location.href=d},a.afterWaitingforEventTimeout);a.eventStop()},addSubmitLog:function(){var a="",a="&"+this.paramCNaviUse+"="+(this.isCNaviUsed?"1":"0");0!=this.exParam.length&&(a+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));
return a}};searchplat.suggest.modules.push(g)}}})();
(function(){if("undefined"!=typeof jQuery){var f=jQuery.noConflict();if(!("undefined"===typeof searchplat||"undefined"===typeof searchplat.suggest||"undefined"===typeof searchplat.suggest.plugins)){var g=function(){};g.pluginName="asuraku";g.prototype={linkUrl:"",collection:null,cssRow:"asurakuRow",cssLink:"asurakuLink",cssEmphasize:"asurakuEm",linkSuffix:"",isAsurakuUsed:0,asurakuExsistsCss:"sggstAr",partsname:"suggestasu",channel:null,func:"Suggest",parts:null,validateConfig:function(a){var b=a.config,
c=b.attr("asurakublacklist");this.linkSuffix=b.attr("asurakuphrase");this.linkUrl=b.attr("asurakuurl");this.collection=b.attr(a.configCollection);if(0===this.collection.length)return!1;c&&0<c.length&&(this.blacklist=c.split(","));return(b=b.attr("asurakupartsname"))&&!a.isMatch(b,/^[a-zA-Z0-9_\-]+$/)?!1:!0},init:function(a){var b=this,c=a.config;if(!b.validateConfig(a))return!1;b.partsname=c.attr("asurakupartsname")||b.partsname;b.parts=c.attr("parts");b.channel=c.attr("channel");a.input.bind("keydown.asuraku",
function(c){if(13==c.keyCode&&1==a.clickEnableFlag){if(!a.suggest.find("."+b.cssRow).is("."+a.cssSelect+":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;b.asurakuSubmit(a,1);return!1}return!0});return!0},createSuggestElems:function(a){return'<div class="'+a.cssNoSelect+" "+this.cssRow+'"><a href="" class="'+this.cssLink+'"><span class="'+a.cssKeyword+'"><span class="'+this.cssEmphasize+'"></span>'+this.linkSuffix+"</span></a></div>"},postInit:function(a){var b=this,c=a.suggest.find("."+b.cssRow),
d=c.find("."+a.cssKeyword);c.bind("click",function(c){c.preventDefault();a.sggstSelectNum=a.index;b.asurakuSubmit(a,2)});d.bind("mouseup",function(a){a.stopPropagation()}).bind("mouseover",function(){a.over(f(this))}).bind("mouseout",function(){f(this).parents("."+b.cssRow).first().removeClass(a.cssSelect).addClass(a.cssNoSelect)})},showWithSuggestKeyword:function(a,b){var c=f.extend(!0,[],b),d=[],e=a.suggest.children("."+this.cssRow).hide(),d="osgenre"===a.formatType?c[1]:c.result;a.suggest.removeClass(this.asurakuExsistsCss);
if(!(0===e.size()||!d||0===d.length))if(c="",(c="osgenre"===a.formatType?d[0]:d[0][0])&&!this._contains(c)&&this.linkSuffix&&this.linkUrl)d=this.linkUrl.replace(/###keyphrase###/,encodeURIComponent(c)),e.find("."+this.cssEmphasize).text(c),e.find("."+this.cssLink).attr("href",d),a.maxIndex+=1,e.show(),a.suggest.addClass(this.asurakuExsistsCss)},_contains:function(a){if(this.blacklist){for(var b=0;b<this.blacklist.length;b++)if(0===a.indexOf(this.blacklist[b]))return!0;return!1}},getSelectedText:function(a,
b){if(f(b).hasClass(this.cssRow))return a.backup},asurakuSubmit:function(a,b){var c=a.suggest.find("."+this.cssRow).find("."+this.cssLink).attr("href");this.isAsurakuUsed=!0;a.submitWay=b;a.usingChar=a.suggest.find("."+this.cssEmphasize).text();try{"function"===typeof s_partsCounter&&s_partsCounter(this.partsname),"function"===typeof ontrackingidAjax&&(1==b?ontrackingidAjax(this.channel,this.func,this.parts,"Enter"):2==b&&ontrackingidAjax(this.channel,this.func,this.parts,"Click"))}catch(d){}a.jump(1);
a.sendSubmitLog(1);setTimeout(function(){window.location.href=c},a.afterWaitingforEventTimeout);a.eventStop()},addSubmitLog:function(){return"&au="+(this.isAsurakuUsed?"1":"0")}};searchplat.suggest.modules.push(g)}}})();
