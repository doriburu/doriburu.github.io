(function(k,g){function f(b){cssStr=b.css("cssText");null==cssStr&&(cssStr="");b.css("cssText",cssStr+"; display:none!important;")}if(k.jQuery!==g){jQuery.noConflict();var a=jQuery;if(a.RJS_Helpers&&a().RJS_Slideshow){var i;i=new function(){var b=this,h="v,d,t,i,p,is,c,view".split(",");a.extend(b,{slideshow:null,settings:{common:{pagespeed:[100,"Range","0,9999"],opacityspeed:[100,"Range","0,9999"],omitname:[38,"Range","0,100"],autoslidetime:[2,"Range","1,10000"],autoslideflag:["next","Str","^(next|prev)$"],
autoslide:[0,"Int","^[0-1]$"],autoresize:[1,"Int","^[0-1]$"],verticalmode:[0,"Int","^[0]$"],ajaxtimer:[3,"Range","1,99"],pagenumber:[0,"Int","^[0-1]$"],indicator:[0,"Int","^[0-1]$"]},reco:{maxitem:[3,"Int","^[1-9]$"],url:["","Str","^http(s?)+(:\\/\\/[a-zA-Z0-9_\\-\\.]+)(\\.rakuten\\.co\\.jp\\/)+([a-zA-Z0-9_&=\\?\\-\\.\\/]+)$"],v:[1,"Int","^[0-9]+$"],d:[4,"Int","^[0-9]+$"],t:[0,"Int","^[0-9]+$"],i:[10,"Range","1,999"],p:[0,"Int","^[0-1]$"],is:["128","Str","^(64|112|128|200)$"],c:["euc-jp","Str","^(utf-8|euc-jp|shift_jis)$"],
view:[1,"Int","^[0-9]+$"]}},eobj:{reco:{config:a("#bta-slideshow-config"),prevButton:a("#bta-slideshow-prev"),nextButton:a("#bta-slideshow-next"),proto:a("#bta-slideshow-proto"),frame:a("#bta-slideshow-frame"),existItem:a("#bta-slideshow-existItemDisplay"),itemsDisplay:a("#bta-slideshow-body"),altContents:a("#bta-slideshow-alteredContents"),loadingContents:a("#bta-slideshow-loading"),indicatorDisplay:a("#bta-slideshow-indicatorArea"),nowPage:a("#bta-slideshow-nowPage"),maxPage:a("#bta-slideshow-maxPage"),
backButton:a("#bta-slideshow-back")},indicator:{proto:a("#bta-slideshow-indicatorProto")}},status:{error:!1,isTimeout:!1},props:{reco:{items:[],proto:{html:"",height:0,width:0,identifiers:{itemurl:["",/\#ITEMURL\#/g,""],imageurl:["",/\#IMAGEURL\#/g,""],itemimage:['<img src="',/\#ITEMIMGELE\#/g,'" >'],itemname:["",/\#ITEMNAME\#/g,""],itemprice:["",/\#ITEMPRICE\#/g,""],shopname:["",/\#SHOPNAME\#/g,""],shopurl:["http://www.rakuten.co.jp/",/\#SHOPURL\#/g,""]}}},indicator:{proto:{html:"",width:0,height:0}}},
loadSettings:function(){f(b.eobj.reco.proto);if(1>b.eobj.reco.config.size())return!1;b.settings.reco=a.RJS_Helpers.readAttr(b.eobj.reco.config,b.settings.reco);b.settings.common=a.RJS_Helpers.readAttr(b.eobj.reco.config,b.settings.common);a.extend(b.settings.reco,b.settings.common,b.settings.reco);if(""==b.settings.reco.url||512<b.settings.reco.url.length||0===b.eobj.reco.proto.length)return!1;b.eobj.reco.config.remove();return!0},initialize:function(){b.loadSettings()&&a(function(){b.eobj.reco.loadingContents.show();
a.ajax({url:function(c,b){for(var c=c+((0<c.indexOf("?")?"&":"?")+"s=1"),a=h.length,d=0;d<a;d++)c+="&"+h[d]+"="+b[h[d]];return c}(b.settings.reco.url,b.settings.reco),cache:!1,dataType:"jsonp",scriptCharset:"euc-jp",timeout:1E3*b.settings.common.ajaxtimer,success:function(c){if(!b.status.isTimeout&&!(c.status===g||c.num===g)&&!(1==c.status||3==c.status||9==c.status)){var j=[],a=c.num;if(a>b.settings.common.maxcount)a=b.settings.common.maxcount;for(var d=0;d<a;d++)j.push({itemname:b.editItemname(c.adList[d].text),
itemurl:c.adList[d].text_click_url,imageurl:c.adList[d].image_click_url,itemimage:c.adList[d].image_url,itemprice:b.editPrice(""+c.adList[d].price),shopname:c.adList[d].shop_name,shopurl:c.adList[d].shop_code});b.props.reco.items=j;if(!(c.item_count<b.settings.common.recothreshold))b.props.recoItemNum=a,b.displayRecoData(b.props,b.eobj,b.settings.reco)}},error:function(){}})})},displayRecoData:function(c,a,e){if(0===a.reco.proto.length)return!1;c.reco.proto.width=a.reco.proto.outerWidth();if(0==c.reco.proto.width)c.reco.proto.width=
a.reco.proto.css("width").replace("px","");c.reco.proto.height=a.reco.proto.outerHeight();c.reco.proto.html=a.reco.proto.html();if(""==c.reco.proto.html)return!1;f(a.reco.proto);a.reco.itemsDisplay.empty();if(e.indicator){if(0===a.indicator.proto.length)return!1;c.indicator.proto.width=a.indicator.proto.outerWidth();if(0==c.indicator.proto.width)c.indicator.proto.width=a.indicator.proto.css("width").replace("px","");c.indicator.proto.height=a.indicator.proto.outerHeight();c.indicator.proto.html=a.indicator.proto.html();
if(""==c.indicator.proto.html)return!1;f(a.indicator.proto);a.reco.indicatorDisplay.empty()}f(a.reco.altContents);a.reco.itemsDisplay.RJS_Slideshow(b,{settings:e,itemPrototype:c.reco.proto,indicatorPrototype:c.indicator.proto,eobj:a.reco,items:c.reco.items,events:{beforeFirstRender:function(a,c){c.eobj.reco.prevButton.show();c.eobj.reco.nextButton.show()},afterFirstRender:function(c,a){a.eobj.reco.loadingContents.hide();a.eobj.reco.existItem.show();a.eobj.reco.itemsDisplay.show();a.eobj.reco.frame.show()},
changePageNumber:1==b.settings.common.pagenumber?b.changePageNumber:!1}});b.eobj.reco.backButton.click(function(a){a.preventDefault();b.slideshow.changePage(1);return!1})},editItemname:function(c){return c=a.RJS_Helpers.omitStr(c,b.settings.common.omitname,"¡Ä")},editPrice:function(a){var b="",e=0;if(!a||0>a)return"";for(var d=a.length-1;0<=d;d--)b=a.charAt(d)+b,e++,0==e%3&&0!=d&&(b=","+b);return b+"±ß"},changePageNumber:function(a,b,e){e.eobj.reco.nowPage.text(a);e.eobj.reco.maxPage.text(b);1==a?e.eobj.reco.backButton.hide():
e.eobj.reco.backButton.show()}})};i.initialize()}}})(this);
